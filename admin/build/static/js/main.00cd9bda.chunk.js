(this.webpackJsonpinventario=this.webpackJsonpinventario||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(39),i=n.n(s),o=(n(64),n(21)),l=n(10),u=(n(65),n(55));var d=function(e){return Object(a.jsx)(u.a,{children:e.children})},h=n(19),b=n(20),m=n(23),j=n(22),p=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(o.b,{to:"/sucursales",children:"Sucursales"})," | ",Object(a.jsx)(o.b,{to:"/productos",children:"Productos"})]})}}]),n}(r.Component),x=n(7),O=n.n(x),f=n(11),g=n(29),v=n(33),y=n(38),C="http://localhost:8001";function k(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(O.a.mark((function e(t){var n,a,r,c,s,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=i.length>2?i[2]:void 0,n.headers={"Content-Type":"application/json",Accept:"application/json","access-token":w()},r=C+t,e.next=6,fetch(r,n);case 6:return c=e.sent,e.next=9,c.json();case 9:if((s=e.sent).tokenStatus){e.next=13;break}return window.location.replace("/login"),e.abrupt("return",!1);case 13:if(!a){e.next=15;break}return e.abrupt("return",s.data[0]);case 15:return e.abrupt("return",s.data);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(new y.a).get("adminRef")}var S={login:{log:function(e){return console.log("api.login.log",e),k("/auth",{method:"POST",body:JSON.stringify(e)})}},branches:{getAll:function(){return k("/branches")},get:function(e){return k("/branches/".concat(e),{},!0)},update:function(e){return k("/branches/".concat(e.branch_id),{method:"PATCH",body:JSON.stringify(e)})},set:function(e){return k("/branches",{method:"POST",body:JSON.stringify(e)})},drop:function(e){return k("/branches/".concat(e),{method:"DELETE"})}},branchItems:{getByBranch:function(e){return k("/branchitems/".concat(e))},set:function(e){return k("/branchItems",{method:"PATCH",body:JSON.stringify(e)})},drop:function(e){return k("/branchItems/",{method:"DELETE",body:JSON.stringify(e)})}},items:{getAll:function(){return k("/items")},get:function(e){return k("/items/".concat(e),{},!0)},update:function(e){return k("/items/".concat(e.id_item),{method:"PATCH",body:JSON.stringify(e)})},set:function(e){return k("/items",{method:"POST",body:JSON.stringify(e)})},drop:function(e){return k("/items/".concat(e),{method:"DELETE"})}}},_=(n(72),n(73),n(57));var A=function(){return Object(a.jsx)("div",{className:"loaderContainer",children:Object(a.jsx)(_.a,{animation:"border"})})},P=n(9),N=n(12),B=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:null,usuario:{username:"",password:""}},e.handleChange=function(t){e.setState({usuario:Object(v.a)(Object(v.a)({},e.state.usuario),{},Object(g.a)({},t.target.name,t.target.value))})},e.logUser=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({loading:!0,error:null}),t.prev=2,t.next=5,S.login.log(e.state.usuario);case 5:(a=t.sent).tokenStatus?((new y.a).set("adminRef",a.token,{}),window.location.replace("/home")):(console.log("Error al Loggear"),e.setState({loading:!1})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("Fail logUser",t.t0),e.setState({loading:!0,error:null});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){(new y.a).remove("adminRef")}},{key:"render",value:function(){return this.state.loading?Object(a.jsx)(A,{}):Object(a.jsxs)("section",{className:"login",children:[Object(a.jsx)("h1",{children:"LogIn"}),Object(a.jsxs)(P.a,{children:[Object(a.jsx)(P.a.Group,{controlId:"formUser",children:Object(a.jsx)(P.a.Control,{type:"text",placeholder:"Usuario",name:"username",onChange:this.handleChange})}),Object(a.jsx)(P.a.Group,{controlId:"formPass",children:Object(a.jsx)(P.a.Control,{type:"password",placeholder:"Contrase\xf1a",name:"password",onChange:this.handleChange})}),Object(a.jsx)(N.a,{variant:"primary",type:"submit",onClick:this.logUser,children:"Aceptar"})]})]})}}]),n}(r.Component),D=n(16),E=n(8),T=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={item:!1,nuevo_item:"undefined"==typeof e.props.match.params.itemId},e.fetch=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.items.get(e.props.match.params.itemId);case 3:a=t.sent,console.log("item",a),e.setState({item:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Fail getItem",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState({item:Object(v.a)(Object(v.a)({},e.state.item),{},Object(g.a)({},t.target.name,t.target.value))})},e.handleSave=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={item_name:e.state.item.name,item_barcode:e.state.item.barcode,item_price:e.state.item.price},t.prev=1,!e.state.nuevo_item){t.next=8;break}return t.next=5,S.items.set(a);case 5:console.log("item Setted"),t.next=12;break;case 8:return a.item_id=e.state.item.id,t.next=11,S.items.update(a);case 11:console.log("item Updated");case 12:window.location.replace("/productos"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log("Fail updateItem",t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDrop=function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.items.drop(e.state.item.id);case 3:console.log("item Deleted"),window.location.replace("/productos"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Fail deleteItem",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.state.nuevo_item?this.setState({item:{name:"",barcode:"",price:""}}):this.fetch()}},{key:"render",value:function(){return this.state.item?Object(a.jsxs)("section",{children:[Object(a.jsx)("h1",{children:this.state.nuevo_item?"Nuevo Producto":this.state.item.name}),Object(a.jsxs)(P.a,{children:[Object(a.jsxs)(P.a.Group,{as:D.a,controlId:"itemName",children:[Object(a.jsx)(P.a.Label,{column:!0,sm:"2",md:"1",children:"Producto"}),Object(a.jsx)(E.a,{sm:"10",md:"11",children:Object(a.jsx)(P.a.Control,{type:"text",placeholder:"Nombre del Producto",name:"name",value:this.state.item.name,onChange:this.handleChange})})]}),Object(a.jsxs)(P.a.Group,{as:D.a,controlId:"itemCode",children:[Object(a.jsx)(P.a.Label,{column:!0,sm:"2",md:"1",children:"C\xf3digo"}),Object(a.jsx)(E.a,{sm:"10",md:"11",children:Object(a.jsx)(P.a.Control,{type:"number",placeholder:"C\xf3digo de Barras",name:"barcode",value:this.state.item.barcode,onChange:this.handleChange})})]}),Object(a.jsxs)(P.a.Group,{as:D.a,controlId:"itemPrice",children:[Object(a.jsx)(P.a.Label,{column:!0,sm:"2",md:"1",children:"Precio"}),Object(a.jsx)(E.a,{sm:"10",md:"11",children:Object(a.jsx)(P.a.Control,{type:"number",step:"0.01",placeholder:"Precio al P\xfablico",name:"price",value:this.state.item.price,onChange:this.handleChange})})]}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(E.a,{children:Object(a.jsx)(N.a,{variant:"primary",type:"button",onClick:this.handleSave,children:"Guardar"})}),this.state.nuevo_item?"":Object(a.jsx)(E.a,{children:Object(a.jsx)(N.a,{variant:"danger",type:"button",onClick:this.handleDrop,children:"Eliminar"})})]})]})]}):Object(a.jsx)(A,{})}}]),n}(r.Component),F=n(26),J=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={items:!1},e.fetch=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.items.getAll();case 3:a=t.sent,console.log("items",a),e.setState({items:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Fail getAllItems",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){return this.state.items?Object(a.jsxs)("section",{children:[Object(a.jsx)("h1",{children:"Productos"}),Object(a.jsxs)(F.a,{defaultActiveKey:"0",children:[Object(a.jsx)(F.a.Item,{variant:"primary",children:Object(a.jsxs)(D.a,{children:[Object(a.jsx)(E.a,{children:"Nombre"}),Object(a.jsx)(E.a,{children:"C\xf3digo de Barras"}),Object(a.jsx)(E.a,{children:"Precio"})]})}),this.state.items.map((function(e){return Object(a.jsx)(F.a.Item,{action:!0,as:o.b,to:"/productos/".concat(e.id),children:Object(a.jsxs)(D.a,{children:[Object(a.jsx)(E.a,{children:e.name}),Object(a.jsx)(E.a,{children:e.barcode}),Object(a.jsxs)(E.a,{children:["$",e.price]})]})},e.id)}))]}),Object(a.jsx)(N.a,{variant:"success",type:"button",as:o.b,to:"/productos/agregar",className:"mt-4",children:"Agregar Producto"})]}):Object(a.jsx)(A,{})}}]),n}(r.Component),L=n(28),U=n(48);var G=function(e){return Object(a.jsxs)(U.a,{as:P.a,className:"mt-4 mb-4",children:[Object(a.jsx)(U.a.Header,{children:Object(a.jsx)(P.a.Control,{type:"text",placeholder:"Nombre de Sucursal",value:e.branch.name,name:"name","data-id":e.branch.id,onChange:e.handleChange})}),Object(a.jsxs)(U.a.Body,{children:[Object(a.jsx)(P.a.Control,{type:"text",placeholder:"Direcci\xf3n de Sucursal",value:e.branch.address,name:"address","data-id":e.branch.id,onChange:e.handleChange}),Object(a.jsx)(N.a,{variant:"primary",className:"mt-3",as:o.b,to:"/sucursales/".concat(e.branch.id),children:"Administrar Productos"})]})]})},M=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={branches:!1},e.fetch=function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.branches.getAll();case 3:a=t.sent,console.log("branches",a),e.setState({branches:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Fail getAllBranches",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=e.state.branches.filter((function(e,n){return e.id==t.target.dataset.id&&n,e.id==t.target.dataset.id}))[0];n[t.target.name]=t.target.value,e.setState({branches:Object(L.a)(e.state.branches)});var a={branch_address:n.address,branch_id:n.id,branch_name:n.name};console.log("Editado",n),e.save(a)},e.save=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.branches.update(t);case 3:console.log("Branch Updated"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Fail getAllBranches",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){var e=this;return this.state.branches?Object(a.jsxs)("section",{children:[Object(a.jsx)("h1",{children:"Sucursales"}),Object(a.jsx)(D.a,{children:this.state.branches.map((function(t){return Object(a.jsx)(E.a,{sm:"6",md:"4",children:Object(a.jsx)(G,{branch:t,handleChange:e.handleChange})},t.id)}))}),Object(a.jsx)(N.a,{variant:"success",children:"Agregar Sucursal"})]}):Object(a.jsx)(A,{})}}]),n}(r.Component),H=n(46),R=n(58),K=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={branch:!1,items:!1,allItems:!1},e.fetchData=function(){var t=Object(f.a)(O.a.mark((function t(n){var a,r,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.props.match.params.branchId),t.prev=1,t.next=4,S.branches.get(e.props.match.params.branchId);case 4:return a=t.sent,t.next=7,S.branchItems.getByBranch(e.props.match.params.branchId);case 7:return r=t.sent,t.next=10,S.items.getAll();case 10:c=t.sent,console.log("branch",a),console.log("items",r),console.log("allItems",c),e.setState({branch:a,items:r,allItems:c}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log("fail getBranch",t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=e.state.items.filter((function(e,n){return e.id_item==t.target.dataset.id&&n,e.id_item==t.target.dataset.id}))[0];console.log("edited_item",n),n[t.target.name]=t.target.value,e.setState({items:Object(L.a)(e.state.items)});var a={item_id:n.id_item,branch_id:e.state.branch.id,num:n.lot};console.log("send_item_api",a),e.save(a)},e.save=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.branchItems.set(t);case 3:console.log("Item Updated"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Fail setBranchItem",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),e.addItem=function(t){e.setState({items:[].concat(Object(L.a)(e.state.items),[{barcode:"",item:"",price:""}])})},e.addInfoItem=function(t){var n=e.state.items;n.pop(),console.log("temp_items",n);var a=e.state.allItems[t.target.dataset.index];e.setState({items:[].concat(Object(L.a)(n),[{id_item:a.id,barcode:a.barcode,item:a.name,price:a.price}])})},e.dropItem=function(){var t=Object(f.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={item_id:n.target.dataset.id,branch_id:e.state.branch.id},t.next=4,S.branchItems.drop(a);case 4:(r=e.state.items).splice(n.target.dataset.index,1),e.setState({items:Object(L.a)(r)}),console.log("Item Deleted",a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Fail deleteBranchItem",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"itemExistInBranch",value:function(e){return this.state.items.filter((function(t){return t.id_item===e})).length>0}},{key:"render",value:function(){var e=this;return this.state.branch&&this.state.items?Object(a.jsxs)("div",{children:[Object(a.jsxs)(F.a,{defaultActiveKey:"0",children:[Object(a.jsx)(F.a.Item,{variant:"primary",children:Object(a.jsxs)(D.a,{children:[Object(a.jsx)(E.a,{children:"Nombre"}),Object(a.jsx)(E.a,{children:"C\xf3digo de Barras"}),Object(a.jsx)(E.a,{children:"Cantidad en Sucursal"}),Object(a.jsx)(E.a,{children:"Precio"})]})}),this.state.items.map((function(t,n){return""===t.item?Object(a.jsx)(F.a.Item,{action:!0,children:Object(a.jsx)(D.a,{children:Object(a.jsx)(E.a,{children:Object(a.jsx)(R.a,{id:"dropdown-item-button",title:"Seleccione el Nuevo Producto",children:e.state.allItems.map((function(t,n){return e.itemExistInBranch(t.id)?"":Object(a.jsx)(H.a.Item,{as:"button",onClick:e.addInfoItem,"data-index":n,children:t.name})}))})})})},t.id):Object(a.jsx)(F.a.Item,{action:!0,children:Object(a.jsxs)(D.a,{children:[Object(a.jsx)(E.a,{children:t.item}),Object(a.jsx)(E.a,{children:t.barcode}),Object(a.jsx)(E.a,{children:Object(a.jsx)(P.a.Control,{type:"text",placeholder:"Cantidad en Sucursal",value:t.lot,name:"lot","data-id":t.id_item,onChange:e.handleChange})}),Object(a.jsxs)(E.a,{children:["$",t.price]}),Object(a.jsx)(E.a,{children:Object(a.jsx)(N.a,{variant:"danger",type:"button",onClick:e.dropItem,"data-id":t.id_item,"data-index":n,children:"X"})})]})},t.id)}))]}),Object(a.jsx)(N.a,{variant:"success",type:"button",onClick:this.addItem,className:"mt-4",children:"Agregar Producto"})]}):Object(a.jsx)(A,{})}}]),n}(r.Component);n(76);var $=function(){return Object(a.jsx)(o.a,{children:Object(a.jsx)(d,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:B}),Object(a.jsx)(l.a,{exact:!0,path:"/login",component:B}),Object(a.jsx)(l.a,{exact:!0,path:"/home",component:p}),Object(a.jsx)(l.a,{exact:!0,path:"/productos/agregar",component:T}),Object(a.jsx)(l.a,{exact:!0,path:"/productos/:itemId",component:T}),Object(a.jsx)(l.a,{exact:!0,path:"/productos",component:J}),Object(a.jsx)(l.a,{exact:!0,path:"/sucursales/:branchId",component:K}),Object(a.jsx)(l.a,{exact:!0,path:"/sucursales",component:M})]})})})};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.00cd9bda.chunk.js.map